<!DOCTYPE html>
<html lnag="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{url_for('static', filename='style.css') }}"/>
    <title>Schlagzeilensammler</title>
</head>
<body>
    <h1>Willkommen beim Schlagzeilensammler</h1>
    <p>Es gibt aktuell {{ count }} Eintr√§ge in der Datenbank.</p>
    <button id="fetch-rss" type="button">Load New Articles</button>
    <ul id="articles-list">
        <!-- News titles go here-->
    </ul>

    <script>
        const b = document.getElementById("fetch-rss")
        b.addEventListener("click", function() {
            fetch("/fetch-articles")
                .then(response => response.json())
                .then(data => {
                    const list = document.getElementById("articles-list")
                    list.innerHTML = ""; // Clear previous entries
                    data.articles.forEach(article => {
                        const li = document.createElement("li");
                        li.textContent = article.title;
                        
                        const a = document.createElement("a");
                        a.href = article.link;
                        a.textContent = "lesen"
                        a.target = "_blank";  // Open in new tab

                        li.appendChild(a);
                        list.appendChild(li);
                    });
                })
        })
        .catch(error => console.error("Error fetching articles:", error));
    </script>
</body>
</html>